segments(x0 = x, y0 = 1, x1 = y, y1 = 1, col = "red", lwd = 3)
x = 114636675
y = 114638951
x1 = 114625981
y1 = 114636910
plot(type = "n", x = 114640000, y = 0, xlim = c(x1, y), ylim = c(-1, 1))
segments(x0 = x1, y0 = 0, x1 = y1, y1 = 0, lwd = 3)
segments(x0 = x, y0 = 1, x1 = y, y1 = 1, col = "red", lwd = 3)
abline(v = x)
x = 114636675
y = 114638951
x1 = 114625981
y1 = 114636910
plot(type = "n", x = 114640000, y = 0, xlim = c(x1, y), ylim = c(-1, 1))
segments(x0 = x1, y0 = 0, x1 = y1, y1 = 0, lwd = 3)
segments(x0 = x, y0 = 1, x1 = y, y1 = 1, col = "red", lwd = 3)
abline(v = x, lty = 2)
x1 - 200
y1 + 2000
y1 - 200
y1 + 2000
mr(list = ls())
rm(list = ls())
?URLdecode
URLdecode(URL = "https://cn.bing.com/search?q=RCurl&qs=n&form=QBLH&sp=-1&pq=rcurl&sc=8-5&sk=&cvid=1AAF9774D0E6415BBEFE39DF93A4D153")
URLencode("https://cn.bing.com/search?q=RCurl&qs=n&form=QBLH&sp=-1&pq=rcurl&sc=8-5&sk=&cvid=1AAF9774D0E6415BBEFE39DF93A4D153")
URLdecode("https://cn.bing.com/search?q=RCurl&qs=n&form=QBLH&sp=-1&pq=rcurl&sc=8-5&sk=&cvid=1AAF9774D0E6415BBEFE39DF93A4D153", reserved = T)
URLdecode("https://cn.bing.com/search?q=RCurl&qs=n&form=QBLH&sp=-1&pq=rcurl&sc=8-5&sk=&cvid=1AAF9774D0E6415BBEFE39DF93A4D153")
t <- "RCurl filetype:PDF"
url <- URLencode(URL = t, reserved = T)
url
URLdecode(URL = url)
url
knitr::include_graphics("figures/Common-HTTP-request-methods.PNG")
knitr::include_graphics("figures/Commen-HTTP-status-code.PNG")
getURL("http://httpbin.org/headers",
useragent = paste(R.version$platform, R.version$version.string, sep = ", "))
library(RCurl)
getURL("http://httpbin.org/headers",
useragent = paste(R.version$platform, R.version$version.string, sep = ", "))
getURL("http://httpbin.org/headers",
useragent = paste(R.version$platform, R.version$version.string, sep = ", ")) %>%
cat()
/cat()
?cat()
?getURL
help(package = "RCurl")
help(package = "roxygen2")
help(package = "rvest")
ls("package:rvest")
library(rvest)
ls("package:rvest")
library(xml2)
ls("package:xml2")
help(package = "xml2")
knitr::opts_chunk$set(echo = TRUE)
getCurlOptionsConstants() %>% names()
library(XML)
library(magrittr)
getCurlOptionsConstants() %>% names()
library(RCurl)
getCurlOptionsConstants() %>% names()
?url
?download.file
?getURL
getURL("http://www.r-datacollection.com/materials/http/helloworld.html")
getURL("http://www.r-datacollection.com/materials/http/helloworld.html") %>%
xpathSApply(path = "//title", fun = xmlValue)
getURL("http://www.r-datacollection.com/materials/http/helloworld.html") %>%
xpathSApply(doc = . %>% xmlParse(), path = "//title", fun = xmlValue)
getURL("http://www.r-datacollection.com/materials/http/helloworld.html") %>%
class()
getURL("http://www.r-datacollection.com/materials/http/helloworld.html")
pngfile <- getBinaryURL("http://www.r-datacollection.com/materials/http/ sky.png")
writeBin(object = pngfile, con = "sky.png")
pngfile <- getBinaryURL("http://www.r-datacollection.com/materials/http/ sky.png")
writeBin(object = pngfile, con = "sky.png")
?writeBin
392.77/162
knitr::opts_chunk$set(echo = TRUE)
raw.data <- "555-1239Moe Szyslak(636) 555-0113Burns, C. Montgomery555-6542Rev. Timothy Lovejoy555 8904Ned Flanders636-555-3226Simpson, Homer5553642Dr. Julius Hibbert"
str_extract_all(raw.data, "[[:alpha:]., ]{2,}")
library(stringr)
library(magrittr)
str_extract_all(raw.data, "[[:alpha:]., ]{2,}")
char.vec <- c("this", "and this", "and that")
str_detect(char.vec, "this")
str_count(example.obj, "this")
example.obj <- "1. A small sentence. - 2. Another tiny sentence."
str_count(example.obj, "this")
example.obj
str_count(char.vec, "this")
str_dup(char.vec, 3)
str_length(char.vec)
str_pad(string = char.vec,
width = max(str_length(char.vec)),
side = "both",
pad = " ")
str_pad(string = char.vec,
width = max(str_length(char.vec)),
side = "both",
pad = " ") %>%
str_trim(side = "both")
str_c(char.vec, collapse = "\n") %>%
cat()
agrep(pattern = "Barack Obama", x = "Barack H. Obama", max.distance = list(all = 3))
?agrep
agrep(pattern = "Barack Obama",
x = "Michelle Obama",
max.distance = list(all = 3))
?agrep
pmatch(c("and this", "and that", "and these", "and those"), char.vec)
pmatch(x = c("and this", "and that", "and these", "and those"),
table = char.vec)
?pmatch
pmatch(x = c("and this", "and that", "and these", "and those"),
table = char.vec,
nomatch = 1)
pmatch(x = c("and this", "and that", "and these", "and those"),
table = char.vec,
nomatch = 0)
pmatch(x = c("and this", "and that", "and these", "and those"),
table = char.vec,
nomatch = 0,
duplicates.ok = F)
pmatch(x = c("and this", "and that", "and these", "and those"),
table = char.vec,
nomatch = 0,
duplicates.ok = T)
library(XML)
if(!file.exists("listOfSimpsonsEpisodes.html")){
link <- "http://en.wikipedia.org/wiki/List_of_The_Simpsons_episodes"
download.file(link, "listOfSimpsonsEpisodes.html", mode = "wb")
}
if(!file.exists("./file/listOfSimpsonsEpisodes.html")){
link <- "http://en.wikipedia.org/wiki/List_of_The_Simpsons_episodes"
download.file(link, "listOfSimpsonsEpisodes.html", mode = "wb")
}
tables <- readHTMLTable(doc = "files/List of The Simpsons episodes - Wikipedia.html",
header = T,
stringsAsFactors = F)
tmpcols <- names(tables[[3]])
tmpcols
tables[[3]]
tmpcols <- intersect(tmpcols, names(tables[[1]]))
for(i in 3:20){
tmpcols <- intersect(tmpcols, names(tables[[1]]))
}
tmpcols
tmpcols <- names(tables[[3]])
tmpcols
for(i in 3:20){
tmpcols <- intersect(tmpcols, names(tables[[i]]))
}
tmpcols
episodes <- NULL
knitr::opts_chunk$set(echo = TRUE)
library(GEOmetadb)
library(DBI)
library(RSQLite)
library(tidyverse)
con <- dbConnect(drv = RSQLite::SQLite(), "f:/git/Data/GEOmetadb.sqlite")
dbListFields(con, "gse")
dbListFields(con, "gsm")
dbReadTable(conn = con, name = "gsm")
dbReadTable(conn = con, name = "gsm") %>% head()
dbListFields(con, "gsm")
rm(list = ls())
setwd("F:/git/R-codes/sslab/CGRP")
knitr::opts_chunk$set(echo = TRUE)
library(limma)
library(tidyverse)
m_f11 <- read.table(file = "f:/DRG/GSM1968259_NEW.F-11_mouse.counts.b.txt.gz",
sep = "\t")
m_f11 %>% head()
m_f11 <- read.table(file = "f:/DRG/GSM1968259_NEW.F-11_mouse.counts.b.txt.gz",
sep = "\t",
stringsAsFactors = F)
m_f11 %>% head()
m_ND723 <- read.table(file = "f:/DRG/GSM1968260_NEW.ND7_23_mouse.counts.b.txt.gz",
sep = "\t",
stringsAsFactors = F)
m_ND723 %>% head()
?merge
merge(x = m_f11, y = m_ND723, by.x = "V1", by.y = "V1")
merge(x = m_f11, y = m_ND723, by.x = "V1", by.y = "V1") %>%
filter(V1 = "Calca")
merge(x = m_f11, y = m_ND723, by.x = "V1", by.y = "V1") %>%
dplyr::filter(V1 = "Calca")
merge(x = m_f11, y = m_ND723, by.x = "V1", by.y = "V1") %>%
dplyr::filter(V1 == "Calca")
merge(x = m_f11, y = m_ND723, by.x = "V1", by.y = "V1") %>%
dplyr::filter(V1 == "Calca")
m_drg <- merge(x = m_f11, y = m_ND723, by.x = "V1", by.y = "V1")
m_drg
m_drg %>%
filter(starts_with("_"))
m_drg %>%
dplyr::filter(starts_with("_"))
m_drg %>%
dplyr::filter(starts_with("-"))
m_drg %>%
dplyr::filter(starts_with("_"))
m_drg
m_drg %>%
dplyr::filter(starts_with("__"))
starts_with()
?starts_with
m_drg$V1 %>% starts_with("_")
m_drg$V1 %>% starts_with("-")
m_drg$V1
m_drg$V1 %>% head()
m_drg
m_drg %>%
column_to_rownames(var = "V1")
m_drg %>%
column_to_rownames(var = "V1") %>%
t()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
.[1:5, 1:5]
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
.[, 1:5]
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
select(starts_with("-"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
select(starts_with("_"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
dplyr::select(starts_with("_"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>% .[, 1:5]
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>% class()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
dplyr::select(starts_with("_"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
dplyr::select(!starts_with("_"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
dplyr::select(!starts_with("_")) %>%
t()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
dplyr::select(!starts_with("_")) %>%
t() %>% head()
?as_tibble
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>% head()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>% .[, 1:5]
m_drg %>%
column_to_rownames(var = "V1")
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble(rownames = c("f11", "ND723")) %>% .[, 1:5]
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble(rownames = c("f11", "ND723")) %>% .[, 1:5]
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble(rownames = c("f11", "ND723"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
.[, 1:5]
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
dplyr::select(!starts_with("_")) %>%
t() %>% head()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>% .[, 1:5]
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
dplyr::select(!starts_with("_"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
select(!starts_with("_"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
select(!starts_with("-"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("-")) %>%
t() %>% head()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("_")) %>%
t()
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("_")) %>%
t() %>%
magrittr::set_colnames(value = c("f11", "ND723"))
m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("_")) %>%
t() %>%
magrittr::set_colnames(value = c("f11", "ND723")) %>%
head()
drg <- m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("_")) %>%
t() %>%
magrittr::set_colnames(value = c("f11", "ND723")) %>%
head()
drg <- m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("_")) %>%
t() %>%
magrittr::set_colnames(value = c("f11", "ND723"))
drg
drg <- m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("_")) %>%
t() %>%
magrittr::set_colnames(value = c("f11", "ND723")) %>%
as.data.frame()
drg
?rpkm
library(limma)
?rpkm
library(edgeR)
?rpkm
cpm(y = drg) %>%
head()
cpm(y = drg) %>%
rownames_to_column(var = "symbol")
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol")
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca")
m_neron <- read.table(file = "f:/DRG/GSM1968257_NEW.mouse_neurons.counts.txt.gz",
sep = "\t",
stringsAsFactors = F)
m_neron
m_neron %>%
filter(V1 == "Calca")
m_neron %>%
.[, 1] %>%
cpm()
m_neron %>%
.[, 2] %>%
cpm()
m_neron %>%
column_to_rownames(var = "V1")
m_neron %>%
column_to_rownames(var = "V1") %>%
cpm()
m_neron %>%
column_to_rownames(var = "V1") %>%
cpm() %>%
as.data.frame()
m_neron %>%
column_to_rownames(var = "V1") %>%
cpm() %>%
as.data.frame() %>%
rownames_to_column(var = "symbol")
m_neron %>%
column_to_rownames(var = "V1") %>%
cpm() %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca")
?merge
left_join()
?left_join
m_neron
m_drg
merge(m_drg, m_neron, by.x = "V1", by.y = "V1")
m_drg <- merge(m_drg, m_neron, by.x = "V1", by.y = "V1")
drg <- m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("_")) %>%
t() %>%
magrittr::set_colnames(value = c("f11", "ND723")) %>%
as.data.frame()
drg <- m_drg %>%
column_to_rownames(var = "V1") %>%
t() %>%
as_tibble() %>%
select(!starts_with("_")) %>%
t() %>%
magrittr::set_colnames(value = c("f11", "ND723", "neuron")) %>%
as.data.frame()
drg
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca")
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca") %>%
barplot()
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca") %>%
class()
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca")
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca") %>%
gather(key = "cell",
value = "expression", -symbol)
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca") %>%
gather(key = "cell",
value = "expression", -symbol) %>%
ggplot(aes(x = cell, y = expression)) +
geom_bar()
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca") %>%
gather(key = "cell",
value = "expression", -symbol) %>%
ggplot(aes(x = cell, y = expression)) +
geom_bar(stat = "identity")
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca")
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca") %>%
gather(key = "cell",
value = "expression", -symbol) %>%
ggplot(aes(x = cell, y = expression)) +
geom_bar(stat = "identity")
cpm(y = drg) %>%
as.data.frame() %>%
rownames_to_column(var = "symbol") %>%
filter(symbol == "Calca") %>%
gather(key = "cell",
value = "expression", -symbol) %>%
ggplot(aes(x = cell, y = expression)) +
geom_bar(stat = "identity") +
scale_y_continuous(trans = "log2")
library(XML)
neuron <- htmlParse(file = "f:/Mouse Neurons Cell Lines from CEDARLANE _ Biocompare.html")
neuron
neuron %>% xmlRoot()
rm(list = ls())
